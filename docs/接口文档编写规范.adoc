= 接口文档编写规范
xiayx <xiayouxue@hotmail.com>
v1.0, 2018-06-21: SNAPSHOT
:doctype: docbook
:toc: left
:numbered:
:imagesdir: assets/images
:sourcedir: ../src/main/java
:resourcesdir: ../src/main/resources
:testsourcedir: ../src/test/java
:source-highlighter: coderay
:coderay-linenums-mode: inline

本文档用于规范如何使用adoc文件编写接口文档。
接口的定义不局限于编程语言的。

*以下是一个接口的定义格式：*

== _接口名称_
_接口描述_

=== 请求地址
_<<_请求方法>>_ _<<_链接>>_

=== 参数
_<<_参数说明>>_

=== 返回结果
_<<_返回结果说明>>_

== 详细说明

=== 请求方法
请求方法包括以下可选值：

* GET
* POST
* PUT
* DELETE

=== 链接
链接使用**path**，以``/``作为起始符。
关于path的说明，请参考 https://peacetrue.github.io/url/detail.html[url组成结构^]。

=== 参数说明
参数使用以下表格进行定义：

|===
|名称 |描述 |类型 |可空 |默认值 |备注

|_英文名称_
|_中文描述_
|_<<_类型>>_
|_<<_可空>>_
|_未指定此参数时使用的默认值，没有值时此项置空^<<_1,1>>^_
|_需要注意的事项，没有值时此项置空_
|===
* 可组合<<签名参数>>、<<分页参数>>^<<_2,2>>^

.说明
. 没有参数则省略此章节
. [[_2]]当接口参数使用了通用定义中的<<通用定义_参数>>时，可以在参数表格底部进行声明
. 接口参数可以覆盖通用参数以修改变化的属性，例如：排序参数在通用参数中没有指定默认值，可以在接口参数中指定

=== 返回结果说明
_所有接口统一返回<<返回结果>>类型的数据_

使用以下表格列出不同结果下可能返回的数据类型：
|===
|编码 |描述 |数据类型 |可空 |备注
|_数字或英文编码_
|_中文描述_
|_<<_类型>>_
|_<<_可空>>_
|_需要注意的事项_
|===
* 可包含<<argument_format_mismatch,参数类型不匹配>>、<<error,错误>> ^<<__1,说明>>^

.说明
. [[__1]]当接口返回结果使用了通用定义中的返回结果时，可以在返回结果表格底部进行声明

=== 类型
基本类型::
* 数值
** 整数
** 浮点
* 字符串
* 布尔：true/false，1/0
* 日期
* 集合
[[自定义类型]]自定义类型::
使用以下表格定义：

.自定义类型
|===
|名称 |描述 |类型 |可空 |备注

|_英文名称_
|_中文描述_
|_<<_类型>>_
|_<<_可空>>_
|_需要注意的事项_
|===
任意类型::
包含以上所有类型。

在表述类型时：

* 可以使用一个具体的类型，例如：整数；
* 可以使用一个泛化类型，例如：基础类型、任意类型；
* 可以使用多个类型，例如：整数/字符串。

=== 可空
可空包括以下可选值：

* 是
* 否

== 通用定义
预定义大多数接口都会使用到的信息，避免重复定义。

[[通用定义_参数]]
=== 参数
[[签名参数]]
.签名参数
|===
|名称 |描述 |类型 |可空 |默认值 |备注

|timestamp
|时间戳
|整数
|否
|&nbsp;
|&nbsp;

|nonce
|唯一的随机字符串
|字符串
|否
|&nbsp;
|&nbsp;

|sign
|签名
|字符串
|否
|&nbsp;
|&nbsp;

|data
|数据
|任意类型
|是
|&nbsp;
|不同的接口使用不同的数据类型
|===

[[分页参数]]
.分页参数
|===
|名称 |描述 |类型 |可空 |默认值 |备注

|page
|页码
|整数
|是
|0
|大于等于0

|size
|每页记录条数
|整数
|是
|10
|大于0并且小于等于100

|sort
|排序
|字符串集合
|是
|&nbsp;
|格式为：**__属性名__ asc/desc**
|===

=== 类型
[[返回结果]]
.返回结果
|===
|名称 |描述 |类型 |可空 |备注

|code
|编码
|整数/字符串
|否
|&nbsp;

|message
|描述
|字符串
|否
|&nbsp;

|data
|数据
|任意类型
|是
|不同结果具有不同类型的数据
|===

[[属性]]
.属性
|===
|名称 |描述 |类型 |可空 |备注

|name
|属性名
|字符串
|否
|&nbsp;

|value
|属性值
|基本类型
|否
|&nbsp;
|===

[[分页]]
.分页
|===
|名称 |描述 |类型 |可空 |备注

|totalElements
|总数据条数
|整数
|否
|&nbsp;

|data
|数据
|任意类型
|否
|不同的接口会使用不同的类型
|===

=== 返回结果
通用的不同类型的返回结果说明：
|===
|编码 |描述 |数据类型 |可空 |备注
|success
|成功
|任意类型
|是
|不同的接口会使用不同的数据类型

|[[argument_format_mismatch]] argument_format_mismatch
|参数格式不匹配
|<<属性>>
|否
|出现错误的属性名和属性值

|[[error]] error
|系统异常
|字符串
|是
|通用的错误类型，不确定具体错误时使用
|===
* 参数格式不匹配



*以下是一个接口的定义示例：*

== 用户分页查询
分页查询用户信息，默认按创建时间倒序排列。

=== 请求地址
GET /users

=== 参数
|===
|名称 |描述 |类型 |可空 |默认值 |备注

|name
|用户名
|字符串
|是
|&nbsp;
|模糊匹配

|createdTimeBegin
|起始创建时间
|日期
|是
|&nbsp;
|格式为'yyyy-MM-dd'，创建时间大于等于此时间

|createdTimeEnd
|结束创建时间
|日期
|是
|&nbsp;
|格式为'yyyy-MM-dd'，创建时间小于等于此时间

|sort
|排序
|字符串集合
|是
|createdTime desc
|格式为：**__属性名__ asc/desc**
|===
* 可组合<<分页参数>>

=== 返回结果
|===
|编码 |描述 |数据类型 |可空 |备注
|success
|成功
|<<分页>>
|否
|分页数据为<<用户>>
|===
* 可包含<<argument_format_mismatch,参数类型不匹配>>、<<error,错误>>

[[用户]]
.用户
|===
|名称 |描述 |类型 |可空 |备注

|name
|用户名
|字符串
|否
|&nbsp;

|nickname
|昵称
|字符串
|否
|&nbsp;

|status
|状态
|字符串
|否
|使用<<用户状态>>的编码值

|createdTime
|创建时间
|字符串
|否
|格式为'yyyy-MM-dd'
|===

[[用户状态]]
.用户状态
|===
|编码 |名称

|enable  |启用
|disable |禁用
|===

问题：列举一个成功的JSON格式的返回结果？

=== 注意事项
. [[_1]]表格置空请使用一个HTML的空白符``\&nbsp;``





                                                             